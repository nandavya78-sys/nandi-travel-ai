<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Nandi Travel AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #0b1020;
  color: #fff;
  font-family: Arial, sans-serif;
}
header {
  padding: 16px;
  font-weight: bold;
}
#chat {
  max-width: 900px;
  margin: auto;
  padding-bottom: 120px;
}
.message {
  margin: 10px 0;
}
.user { text-align: right; }
.bot { opacity: 0.85; }

#inputBar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #0b1020;
  padding: 10px;
  display: flex;
  gap: 6px;
}
#chatInput {
  flex: 1;
  padding: 10px;
}
button {
  padding: 10px;
  cursor: pointer;
}
#plusMenu {
  display: none;
  background: #111;
  padding: 10px;
  margin: 10px 0;
}
.section {
  display: none;
  background: #111;
  padding: 15px;
  margin-top: 10px;
}
.card {
  background: #fff;
  color: #000;
  padding: 10px;
  margin: 8px 0;
}
#itinerary {
  background: #111;
  padding: 15px;
  margin-top: 15px;
}
</style>
</head>

<body>

<header>‚úà Nandi Travel AI</header>

<div id="chat">
  <div class="message bot">Hi üëã How can I help you today?</div>

  <div id="plusMenu">
    <button onclick="openFlights()">‚úà Flights</button>
    <button onclick="openHotels()">üè® Hotels</button>
  </div>

  <div id="flights" class="section">
    <h3>Flights</h3>
    <div id="flightResults"></div>
  </div>

  <div id="hotels" class="section">
    <h3>Hotels</h3>
    <div id="hotelResults"></div>
  </div>

  <div id="itinerary">
    <h3>üìã Itinerary</h3>
    <div id="cart"></div>
    <button onclick="saveDraft()">Save Draft</button>
    <button onclick="loadDraft()">Load Draft</button>
    <button onclick="clearDraft()">Clear Draft</button>
    <button onclick="exportPDF()">Export PDF</button>
  </div>
</div>

<div id="inputBar">
  <button id="plusBtn">+</button>
  <input id="chatInput" placeholder="Type a message..." />
  <button id="sendBtn">Send</button>
</div>

<script>
const chat = document.getElementById("chat");
const chatInput = document.getElementById("chatInput");
const plusMenu = document.getElementById("plusMenu");
const flights = document.getElementById("flights");
const hotels = document.getElementById("hotels");
const cartDiv = document.getElementById("cart");

let cart = [];

function addMessage(text, cls="bot"){
  const div = document.createElement("div");
  div.className = "message " + cls;
  div.innerText = text;
  chat.insertBefore(div, plusMenu);
}

document.getElementById("sendBtn").onclick = sendMessage;
chatInput.addEventListener("keydown", e=>{
  if(e.key==="Enter") sendMessage();
});

function sendMessage(){
  const text = chatInput.value.trim();
  if(!text) return;
  addMessage(text,"user");
  chatInput.value="";
  addMessage("Use + to search Flights or Hotels.");
}

document.getElementById("plusBtn").onclick = ()=>{
  plusMenu.style.display = plusMenu.style.display==="block"?"none":"block";
};

function openFlights(){
  flights.style.display="block";
  hotels.style.display="none";
  plusMenu.style.display="none";
  loadFlights();
}

function openHotels(){
  hotels.style.display="block";
  flights.style.display="none";
  plusMenu.style.display="none";
  loadHotels();
}

function loadFlights(){
  const f = document.getElementById("flightResults");
  f.innerHTML="";
  ["Air India","IndiGo","Vistara","Akasa","SpiceJet","British Airways"].forEach(a=>{
    f.innerHTML += `<div class="card">${a} ‚Äì ‚Çπ25,000 <button onclick="addToCart('Flight: ${a}')">Add</button></div>`;
  });
}

function loadHotels(){
  const h = document.getElementById("hotelResults");
  h.innerHTML="";
  ["Taj","ITC","Marriott","Hyatt","Hilton","Novotel"].forEach(a=>{
    h.innerHTML += `<div class="card">${a} ‚Äì ‚Çπ6,000 <button onclick="addToCart('Hotel: ${a}')">Add</button></div>`;
  });
}

function addToCart(item){
  cart.push(item);
  renderCart();
}

function renderCart(){
  cartDiv.innerHTML = cart.map(i=>`‚Ä¢ ${i}`).join("<br>");
}

function saveDraft(){
  localStorage.setItem("nandiDraft", JSON.stringify(cart));
  alert("Draft saved");
}

function loadDraft(){
  const d = localStorage.getItem("nandiDraft");
  if(d){ cart = JSON.parse(d); renderCart(); }
}

function clearDraft(){
  cart=[]; renderCart(); localStorage.removeItem("nandiDraft");
}

function exportPDF(){
  const w = window.open("");
  w.document.write("<h1>Nandi Travel AI ‚Äì Itinerary</h1>");
  cart.forEach(i=>w.document.write("<p>"+i+"</p>"));
  w.document.write("<p>GST Included</p>");
  w.print();
}
</script>

</body>
</html>
