<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Nandi Travel AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: linear-gradient(135deg, #0b1020, #020617);
  color: #e5e7eb;
}

header {
  text-align: center;
  padding: 16px;
  font-size: 20px;
  font-weight: 600;
}

#chat {
  max-width: 900px;
  margin: auto;
  padding: 16px;
  min-height: 60vh;
}

.bot {
  background: #111827;
  padding: 12px 14px;
  border-radius: 12px;
  margin-bottom: 12px;
  width: fit-content;
  max-width: 80%;
}

.user {
  background: #2563eb;
  padding: 12px 14px;
  border-radius: 12px;
  margin-left: auto;
  margin-bottom: 12px;
  width: fit-content;
  max-width: 80%;
}

.controls {
  max-width: 900px;
  margin: auto;
  padding: 12px;
  display: flex;
  gap: 8px;
}

button {
  background: #2563eb;
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 8px;
  cursor: pointer;
}

input {
  flex: 1;
  padding: 10px;
  border-radius: 8px;
  border: none;
}

.form {
  max-width: 900px;
  margin: auto;
  padding: 16px;
  display: none;
}

.form input {
  width: 100%;
  margin-bottom: 10px;
}

.suggestions {
  background: #020617;
  border-radius: 6px;
  margin-top: -6px;
  margin-bottom: 10px;
  overflow: hidden;
}

.suggestions div {
  padding: 8px 10px;
  cursor: pointer;
}

.suggestions div:hover {
  background: #1e293b;
}
</style>
</head>

<body>

<header>Nandi‚Äôs Travel AI (Demo)</header>

<div id="chat">
  <div class="bot">Hi there üëã How can I help you?</div>
</div>

<div class="controls">
  <button onclick="openFlights()">Flights</button>
  <button onclick="openHotels()">Hotels</button>
</div>

<!-- FLIGHTS FORM -->
<div id="flightsForm" class="form">
  <input placeholder="From city" oninput="searchCity(this, 'fromSug')" />
  <div id="fromSug" class="suggestions"></div>

  <input placeholder="To city" oninput="searchCity(this, 'toSug')" />
  <div id="toSug" class="suggestions"></div>

  <input type="date" />
  <button onclick="searchFlights()">Search Flights</button>
</div>

<!-- HOTELS FORM -->
<div id="hotelsForm" class="form">
  <input placeholder="City" oninput="searchCity(this, 'hotelSug')" />
  <div id="hotelSug" class="suggestions"></div>

  <input type="date" />
  <input type="date" />
  <button onclick="searchHotels()">Search Hotels</button>
</div>

<!-- CHAT INPUT -->
<div class="controls">
  <input id="msg" placeholder="Type a message..." onkeydown="enterSend(event)" />
  <button onclick="sendMsg()">Send</button>
</div>

<script>
function addBot(text) {
  chat.innerHTML += `<div class="bot">${text}</div>`;
  chat.scrollTop = chat.scrollHeight;
}

function addUser(text) {
  chat.innerHTML += `<div class="user">${text}</div>`;
  chat.scrollTop = chat.scrollHeight;
}

function openFlights() {
  flightsForm.style.display = "block";
  hotelsForm.style.display = "none";
  addBot("Please enter flight details ‚úàÔ∏è");
}

function openHotels() {
  hotelsForm.style.display = "block";
  flightsForm.style.display = "none";
  addBot("Please enter hotel details üè®");
}

function sendMsg() {
  const t = msg.value.trim();
  if (!t) return;
  addUser(t);
  msg.value = "";
}

function enterSend(e) {
  if (e.key === "Enter") sendMsg();
}

/* üîç OpenStreetMap Autocomplete */
async function searchCity(input, boxId) {
  const q = input.value.trim();
  if (q.length < 3) {
    document.getElementById(boxId).innerHTML = "";
    return;
  }

  const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}&addressdetails=1&limit=5`;
  const res = await fetch(url);
  const data = await res.json();

  const box = document.getElementById(boxId);
  box.innerHTML = "";

  data.forEach(place => {
    const div = document.createElement("div");
    div.textContent = place.display_name;
    div.onclick = () => {
      input.value = place.display_name;
      box.innerHTML = "";
    };
    box.appendChild(div);
  });
}

function searchFlights() {
  addBot("Fetching flight options‚Ä¶ (demo)");
}

function searchHotels() {
  addBot("Fetching hotel options‚Ä¶ (demo)");
}
</script>

</body>
</html>
