<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Nandi Travel AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#020617,#020617);
  color: #fff;
}

header {
  padding: 12px 20px;
  background: #020617;
  border-bottom: 1px solid #1f2937;
}

.container {
  display: flex;
  height: calc(100vh - 50px);
}

.main {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
}

.chat-box {
  background: #020617;
  padding: 14px;
  border-radius: 10px;
  margin-bottom: 12px;
  border: 1px solid #1f2937;
}

input, select, button {
  height: 38px;
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}

button {
  cursor: pointer;
}

.primary { background:#2563eb;color:#fff; }
.secondary { background:#1f2937;color:#fff; }

.filters {
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:10px;
}

.card {
  background:#fff;
  color:#000;
  border-radius:10px;
  padding:14px;
  margin-top:12px;
}

.support {
  width: 300px;
  background:#020617;
  border-left:1px solid #1f2937;
  display:flex;
  flex-direction:column;
}

.support-header {
  padding:12px;
  border-bottom:1px solid #1f2937;
}

.support-body {
  flex:1;
  padding:10px;
  overflow-y:auto;
}

.support-input {
  padding:10px;
  border-top:1px solid #1f2937;
}

.city-results div {
  background:#111827;
  padding:6px;
  cursor:pointer;
}
.city-results div:hover { background:#1f2937; }

.plus-btn {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  font-size: 22px;
}
</style>
</head>

<body>

<header>‚úàÔ∏è Nandi Travel AI</header>

<div class="container">

<div class="main">

<div class="chat-box">
  Hi üëã How can I help you today?
  <br><br>
  <button onclick="setFare('public')">Public Fare</button>
  <button onclick="setFare('corporate')">Corporate Fare</button>
</div>

<!-- FLIGHTS -->
<div id="flights">
<h3>Flights</h3>

<div class="filters">
<input id="fromCity" placeholder="From city" oninput="searchCity(this.value)">
<div id="cityResults" class="city-results"></div>

<input placeholder="To city">
<input type="date">
<input type="date">

<select>
<option>Economy</option>
<option>Business</option>
<option>First Class</option>
</select>

<input type="range" min="10000" max="100000" step="1000" oninput="priceLbl.innerText=this.value">
<span id="priceLbl">50000</span>

<select>
<option>Non-stop</option>
<option>1 Stop</option>
</select>
</div>

<button class="primary" onclick="renderResult()">Search Flights</button>
</div>

<div id="resultCard" class="card"></div>

<div style="margin-top:10px">
<button onclick="exportPDF()">Export PDF</button>
<button onclick="saveDraft()">Save Draft</button>
<button onclick="loadDraft()">Load Draft</button>
</div>

</div>

<!-- SUPPORT -->
<div class="support">
<div class="support-header">üí¨ Customer Support</div>
<div class="support-body">Hi üëã How can I help you?</div>
<div class="support-input">
<input placeholder="Message...">
<button class="primary">Send</button>
</div>
</div>

</div>

<button class="plus-btn primary" onclick="toggleFlights()">+</button>

<script>
let fareMode="public";
let fares={
 public:{base:28400,gst:1420},
 corporate:{base:26200,gst:1310}
};

function setFare(m){fareMode=m;renderResult();}

function renderResult(){
 let f=fares[fareMode];
 document.getElementById("resultCard").innerHTML=
 `<b>Air India</b><br>
 ‚Çπ${f.base+f.gst}<br>
 <small>Base ‚Çπ${f.base} + GST ‚Çπ${f.gst}</small>`;
}

async function searchCity(q){
 if(q.length<3)return;
 let r=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${q}`);
 let d=await r.json();
 cityResults.innerHTML=d.slice(0,5).map(c=>`<div onclick="selectCity('${c.display_name}')">${c.display_name}</div>`).join("");
}
function selectCity(v){fromCity.value=v;cityResults.innerHTML="";}

function exportPDF(){
 const {jsPDF}=window.jspdf;
 const pdf=new jsPDF();
 let f=fares[fareMode];
 pdf.text("Nandi Corporate Travel ‚Äì Itinerary",20,20);
 pdf.text(`Fare: ${fareMode}`,20,35);
 pdf.text(`Base: ‚Çπ${f.base}`,20,50);
 pdf.text(`GST: ‚Çπ${f.gst}`,20,60);
 pdf.text(`Total: ‚Çπ${f.base+f.gst}`,20,70);
 pdf.save("itinerary.pdf");
}

function saveDraft(){
 localStorage.setItem("nandiDraft",fareMode);
 alert("Draft saved");
}
function loadDraft(){
 let d=localStorage.getItem("nandiDraft");
 if(d){fareMode=d;renderResult();}
}

function toggleFlights(){
 document.getElementById("flights").scrollIntoView({behavior:"smooth"});
}
</script>

</body>
</html>
